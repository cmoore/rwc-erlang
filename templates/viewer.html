{% include "header.html" %}

<script type="text/javascript">
    function constrain() {
        var i = 0;
        var Fx = document.getElementsByTagName( 'div' );
        if ( Fx[0].style.width == "" ) {
            for ( i = 0; i < Fx.length; i++ ) {
                Fx[i].style.width = "350px";
            }
            document.getElementById('const').innerHTML = "<b>Unconstrain</b>";
            Vx = document.getElementsByName('longname');
            for ( var x = 0; x < Vx.length; x++ ) {
                Vx[x].style.display = "none";
            }
        } else {
            for ( i = 0; i < Fx.length; i++ ) {
                Fx[i].style.width = null;
            }
            document.getElementById('const').innerHTML = "<b>Constrain</b>";
            Vx = document.getElementsByName('longname');
            for ( var x = 0; x < Vx.length; x++ ) {
                Vx[x].style.display = "";
            }
        }
    }
    function toggle_chxbox( Name ) {
        var Fx = document.getElementById( Name );
        if ( Fx ) {
            if ( Fx.checked ) {
                Fx.checked = false;
            } else {
                Fx.checked = true;
            }
        }
    }
</script>
<br/>
<form method="POST" action="/t/post">
  <div class="newtweet">
    <input id="texty" style="font-size:18px;" type="text" name="message"/>&nbsp;<input type=submit value="Post"/>
    <br/>
    <span onclick="toggle_chxbox('tchbx');"><b>Twitter:</b></span><input id="tchbx" type="checkbox" name="post_twitter" checked/>
    <span onclick="toggle_chxbox('ichbx');"><b>Identica:</b></span><input id="ichbx" type="checkbox" name="post_identica" checked>
    <br/>
  </div>
</form>

<br/>
{% for e in twittermessages %}
<div class="message">
  <table>
    <tr>
      <td>
        <img border=0 src="{{ e.picture }}" style="width:45px;height:45px;"/>
      </td>
      <td>
        {% ifequal e.svc "twitter" %}
        <a href="http://twitter.com/{{ e.screen_name }}"><span name="longname">{{ e.name }}</a>({{ e.screen_name }})</span>
        {% endifequal %}
        {% ifequal e.svc "identica" %}
        <a href="http://identi.ca/{{ e.screen_name }}"><span name="longname">{{ e.name }}</a>({{ e.screen_name }})</span>
        {% endifequal %}

        {% ifequal e.svc "twitter" %}
        from <a href="http://twitter.com/">twitter</a>&nbsp;<span onclick="javascript:document.getElementById('texty').value='@{{ e.screen_name }} ';document.getElementById('texty').focus();document.getElementById('ichbx').checked=0;document.getElementById('tchbx').checked = true;">[@]</span>
        {% endifequal %}

        {% ifequal e.svc "identica" %}
        from <a href="http://identi.ca/">identi.ca</a>&nbsp;<span onclick="javascript:document.getElementById('texty').value='@{{ e.screen_name }} ';document.getElementById('texty').focus();document.getElementById('tchbx').checked=0;document.getElementById('ichbx').checked = true;">[@]</span>
        {% endifequal %}
        <br/>
        {{ e.text }}
      </td>
    </tr>
  </table>
</div>
{% endfor %}

{% include "footer.html" %}
